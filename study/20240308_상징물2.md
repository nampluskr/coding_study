### [상징물2] TC 12 까지

```cpp
#include <vector>
#include <algorithm>
using namespace std;

#define INF 0x7fffffff

vector<int> arr;
vector<int> bits;

// O(n)
void select1(int target) {
    int n = arr.size();
	for (int i = 0; i < n; i++) {
		if (arr[i] == target)
			bits.push_back((1 << i));
		else if (target < arr[i])
			return;
	}
}

// O(n)
void select2(int target) {
    int n = arr.size();
    int lo = 0, hi = n - 1;
    while (lo < hi) {
        int sum = arr[lo] + arr[hi];
        if (sum == target) {
            bits.push_back((1 << lo) | (1 << hi));
            lo++; hi--;
        }
        else if (sum < target) lo++;
        else hi--;
    }
}

// O(n^2)
void select3(int target) {
    int n = arr.size();
    for (int i = 0; i < n - 2; i++) {
        int lo = i + 1, hi = n - 1;
        while (lo < hi) {
            int sum = arr[i] + arr[lo] + arr[hi];
            if (sum == target) {
                bits.push_back((1 << i) | (1 << lo) | (1 << hi));
                lo++; hi--;
            }
            else if (sum < target) lo++;
            else hi--;
        }
    }
}


vector<int> subset(int bit) {
    vector<int> s;
    for (int i = 0; i < arr.size(); i++)
        if (bit & (1 << i))
            s.push_back(arr[i]);
    return s;
}
vector<vector<int>> sol;

void merge(int k, int cnt, int bit) {
    if (cnt >= 2) {
        sol.push_back(subset(bit));
        return;
    }
    for (int i = k; i < bits.size(); i++)
        if ((bit & bits[i]) == 0)
            merge(i + 1, cnt + 1, bit | bits[i]);
}

int get_max(const vector<int>& arr) {
    int res = -INF;
    for (int x : arr)
        res = max(res, x);
    return res;
}

int get_min(const vector<vector<int>>& sol) {
    int res = INF;
    for (const auto& s : sol)
        res = min(res, get_max(s));
    return res;
}

/////////////////////////////////////////////////////////////////////
void init()
{
	arr.clear();
}

void addBeam(int mLength)
{
	arr.push_back(mLength);
}

int requireSingle(int mHeight)
{
    bits.clear();
    sort(arr.begin(), arr.end());   // O(NlogN)
    select1(mHeight);               // O(N)
    select2(mHeight);               // O(N)
    select3(mHeight);               // O(N^2)

    sol.clear();
    for (int bit : bits)
        sol.push_back(subset(bit));

    int res = -1;
    if (sol.size() > 0)
        res = get_min(sol);
	return res;
}

int requireTwin(int mHeight)
{
    bits.clear();
    sort(arr.begin(), arr.end());   // O(NlogN)
    select1(mHeight);               // O(N)
    select2(mHeight);               // O(N)
    select3(mHeight);               // O(N^2)

    sol.clear();
    merge(0, 0, 0);

    int res = -1;
    if (sol.size() > 0)
        res = get_min(sol);
    return res;
}
```
